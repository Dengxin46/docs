---
id: PRC721_contract
title: PRC-721 contract
sidebar_label: PRC-721 contract
---

## PRC-721 Contract
PRC-721 is a standard interface for issuing non-fungible tokens (NFT) on the PlatON network and is fully compatible with [ERC-721](https://eips.ethereum.org/EIPS/eip-721).

### Protocol Standards

Each PRC-721-compliant smart contract must implement the PRC721 and PRC165 interfaces, and can implement other extended interfaces according to business needs.

#### PRC-721 & PRC-165 Interface
```Solidity
interface PRC721 /* is PRC165 */ {
    //events
    event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);
    event Approval(address indexed _owner, address indexed _approved, uint256 indexed _tokenId);
    event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);

    //required
    function balanceOf(address _owner) external view returns (uint256);
    function ownerOf(uint256 _tokenId) external view returns (address);
    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external payable;
    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable;
    function transferFrom(address _from, address _to, uint256 _tokenId) external payable;
    function approve(address _approved, uint256 _tokenId) external payable;
    function setApprovalForAll(address _operator, bool _approved) external;
    function getApproved(uint256 _tokenId) external view returns (address);
    function isApprovedForAll(address _owner, address _operator) external view returns (bool);
    interface PRC165 {
        function supportsInterface(bytes4 interfaceID) external view returns (bool);
    }

    //optional
    interface PRC721TokenReceiver {
        function onERC721Received(address _operator, address _from, uint256 _tokenId, bytes _data) external returns(bytes4);
    }
    //The metadata extension interface is optional for PRC-721 smart contracts and allows users to query the name of the smart contract as well as the details of the asset represented by the NFT.
    interface PRC721Metadata {
        function name() external view returns (string _name);
        function symbol() external view returns (string _symbol);
        function tokenURI(uint256 _tokenId) external view returns (string);
    }
    //The enumeration extension is optional for PRC-721 smart contracts and allows a user's smart contract to publish its full list of NFTs and make them visible.
    interface PRC721Enumerable {
        function totalSupply() external view returns (uint256);
        function tokenByIndex(uint256 _index) external view returns (uint256);
        function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256);
    }
}
```

#### Required interfaces

- balanceOf

  Counts the number of NFTs held by users.

- ownerOf

  Query the holder of the NFT.

- safeTransferFrom

  Transfer ownership of the NFT from one address to another.

- transferFrom

  Transferring NFT ownership, the caller is responsible for confirming that the recipient has the ability to receive NFTs that might otherwise be permanently lost.

- approve
 
  Authorize a third party to operate an NFT asset.

- setApprovalForAll

  Authorize a third party to operate an NFT asset.

- getApproved

  Get which address management is authorized for a single NFT.

- isApprovedForAll

  Queries whether an address is authorized to manage token by another address.

- supportsInterface

  Queries whether an address is authorized to manage token by another address.

#### Optionally  interfaces

- onERC721Received

  Contracts that need to accept secure transfers must implement the PRC721TokenReceiver interface.

- name

  The name of the contract.

- symbol

  The abbreviated code for the contract.

- tokenURI

  Give the token a Uniform Resource Identifier (URI) that points to a JSON file that conforms to the "PRC721 Metadata JSON Schema", which needs to be assigned a unique URI for each token when minting it.
  ```JSON
  {
    "title": "Asset Metadata",
    "type": "object",
    "properties": {
        "name": {
            "type": "string",
            "description": "Identifies the asset to which this NFT represents"
        },
        "description": {
            "type": "string",
            "description": "Describes the asset to which this NFT represents"
        },
        "image": {
            "type": "string",
            "description": "A URI pointing to a resource with mime type image/* representing the asset to which this NFT represents. Consider making any images at a width between 320 and 1080 pixels and aspect ratio between 1.91:1 and 4:5 inclusive."
        }
    }
}
  ```

- totalSupply

  Query the total number of tokens owned by this contract.

- tokenByIndex

  Query token by index.

- tokenOfOwnerByIndex

  Find the user's token based on the index.


#### 事件

- Transfer

  This event is triggered when the ownership of any NFT changes (either way), and a log of ownership change information is recorded on the chain.

- Approval

  Triggered when the authorized address of the NFT is changed or confirmed, logging this information on the chain.

- ApprovalForAll

  Triggered when the owner enables or disables the operator (the operator can manage the NFTs held by the owner), logging this information in the chain.

  

### Example
The PRC-721 standard is fully compatible with ERC-721, examples of which can be found [here](https://github.com/0xcert/ethereum-erc721).

### View
It can be viewed through PlatON [browser](https://scan.PlatON.network/tokens/tokensTranfer/prc721) and also through [ATON](https://devdocs.PlatON.network/docs/zh-CN/ ATON-user-manual/) to view the PRC-721 contract transactions.


### Contract Issuance



### Contract Interaction


### Upload Metadata to IPFS network
Metadata is the metadata of an NFT token to provide a richer display of the details of the NFT asset, stored under the chain, and generally the issuance of an NFT token specifies a URI path to the Metadata data of that token.

#### 1.Installing IPFS
Refer to the [IPFS](https://docs.ipfs.io/install/command-line/) installation instructions for installation and startup.

#### 2.Adding files to ipfs

Prepare an image, name it PlatON.jpeg and upload it to the ipfs node
```
$ ipfs add  PlatON.jpeg
added QmZtmD2qt6fJot32nabSP3CUjicnypEBz7bHVDhPQt9aAy PlatON.jpeg
```
Open the link to the image in your browser, and you will see the image indicating that the image was successfully downloaded:
https://ipfs.io/ipfs/QmZtmD2qt6fJot32nabSP3CUjicnypEBz7bHVDhPQt9aAy?filename=PlatON.jpeg

With the image link above, you can use it to construct the metadata used for NFT.

First, create a json file named PlatON.json in accordance with the instructions for metadata in the PRC-721 document:
```
{
    "name":"PlatON.jpg",
    "author":"PlatON",
    "description":"use for prc721",
    "image":"https://ipfs.io/ipfs/QmZtmD2qt6fJot32nabSP3CUjicnypEBz7bHVDhPQt9aAy?filename=PlatON.jpeg"
}
```

Upload to the ipfs node:
```
$ ipfs add  PlatON.json
added QmQXqTVCb1w7CmdsYxHWR1T1qyaCHHgWwiPmoZDcQL39Px PlatON.json
```

Open the uri of the metadata file in your browser:
https://ipfs.io/ipfs/QmQXqTVCb1w7CmdsYxHWR1T1qyaCHHgWwiPmoZDcQL39Px?filename=PlatON.json

Above, upload is finished.